## Video BackGround Subtraction Project
-- 2018.Oct 28 -- 

This project is for video background subtraction and segmentation. For a given video, the processed video will have colorful masks for the foreground, leaving the background unchanged. 

User can expect the processed video has some partial tranparent colors on the video frame, and maintains the outlook of the moving objects. 

The core idea is to use `eigenspace (i.e SVD)` method to model/approximate the static background, and the residual is the foreground. By thresholding the residual frame and do some postprocessing on the mask, the user can then obtain the video with the foreground highlighted by some colors.

For future development, we are going to use deep learning techniques to provide the semantic meaning to the foreground mask so that we can have a more precise foreground hightlighted video.

#### Dependency:
[platform]
Linux-Ubuntu LTS 18.04
**Mac might be fine, BUT windows needs development.**

[core]
python: 3.6 
python-opencv: 3.4.3
moviepy: 0.2.3.5
matplotlib: 3.0.1
scipy: 1.1.0
Pillow: 5.3.0
numpy: 1.15.3

[future]
tensorflow: 1.11.0 [with "tensorflow/models" github repo]

#### File structure:
---- BG_subtractor/
 +  ---- src/
 +   + ---- main.py 
 +   + ---- frameProcessor.py
 +   + ---- myVizTool.py [for visuals]
 +   + ---- semanticHepler.py [where we get tf to infer]
 +   + ---- util.py [some small helper functions]
 +   + ---- experiments/
 +   +      +  ---- Explain later...
 + ---- video_dataset/
 + ---- video_output/
 + ---- debug/ [optional, generated by the algorithm]
 
#### To run the programs:
1. `$ cd PATH_TO_BG_subtractor/src`
2. Open the main.py, and edit all the **path/setting variables** there. [xml/json might be developed later...]
3. `$ python3 main.py`
4. Get your output in `video_output` or other folder you specify in main.py

#### Some visuals:
-- stored in debug/ folder, where:
**combine:** contains the processed video frames, foreground highlighted.
**init**: contains the initial video frames.
**mask**: contains the foreground masks there.

#### Parameters in main.py:
	Setting = {     # video storage info
                    "videoPath": "/home/dongqxia/projects/bgsubtraction/submission/video_dataset/B.mp4",
                    "storePath": "../video_output/mixed_B.mp4",
                    "subClipInterval": 10, # second, means your method processes a subclip with this time interval
                    "startingSeconds": 160, # second, means your method starts to process video from here till end
                    "endingSeconds": 170,

                    # methods
                    "SVD": {"isUsed": True, "nRankApprox": 2},
                    "RobustPCA": {"isUsed": False},
                    "Vibe": {"isUsed": False},

                    # video setting
                    "scale": 25, # if 100, will not be changed.
                    "fps": 15,
                    "initDims": (0, 0),
                    "procDims": (0, 0),
                    "channel": 3, # rgb

                    # others
                    "postProcessing": False,
                    "semanticHelp":{"isUsed":False, "minScore":0.6, "idList":[1]},
                    "debug": True}